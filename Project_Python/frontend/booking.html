<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F4 Hotel - Booking</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { font-family: 'Poppins', sans-serif; }
        h1, h2, h4 { font-family: 'Playfair Display', serif; }
        .navbar-nav .nav-link { color: #333; margin: 0 15px; font-size: 0.9rem; transition: 0.3s; }
        .navbar-nav .nav-link:hover { color: #c5a47e; }
        .card { transition: 0.4s; border-radius: 0; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important; }
        .btn-luxury { background: #c5a47e; border: none; border-radius: 0; transition: 0.3s; }
        .btn-luxury:hover { background: #a68a68; }
    </style>
</head>
<body>

    <!-- Navbar đơn giản, có thể chỉnh lại link -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html" style="color: #c5a47e; font-size: 1.5rem;">F4 HOTEL</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-4">
                <h6 style="color: #c5a47e;">BOOK YOUR STAY</h6>
                <h2 class="display-5 fw-bold">Booking Page</h2>
                <p class="text-muted mb-0">Lựa chọn phòng theo sở thích của bạn.</p>
            </div>

            <div class="row" id="booking-rooms">
                <!-- Template Card 1 -->
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm overflow-hidden h-100">
                        <img src="https://images.pexels.com/photos/164595/pexels-photo-164595.jpeg" class="card-img-top" alt="Room">
                        <div class="card-body text-center">
                            <h4 class="fw-bold">Grade 1</h4>
                            <!-- <p class="text-muted">Diện tích: 50m2 | View Biển</p> -->
                            <h5 style="color: #c5a47e;">Chỉ từ 350.000 VNĐ / Night</h5>
                            <hr>
                            <button class="btn btn-link text-dark text-decoration-none fw-bold">Đặt phòng <i class="fa fa-arrow-right"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Template Card 2 -->
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm overflow-hidden h-100">
                        <img src="https://images.pexels.com/photos/271639/pexels-photo-271639.jpeg" class="card-img-top" alt="Room">
                        <div class="card-body text-center">
                            <h4 class="fw-bold">Grade 2</h4>
                            <!-- <p class="text-muted">[Mô tả diện tích | view]</p> -->
                            <h5 style="color: #c5a47e;">Chỉ từ 450.000 VNĐ / Night</h5>
                            <hr>
                            <button class="btn btn-link text-dark text-decoration-none fw-bold">Đặt phòng <i class="fa fa-arrow-right"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Template Card 3 -->
                <div class="col-md-4 mb-4">
                    <div class="card border-0 shadow-sm overflow-hidden h-100">
                        <img src="https://images.pexels.com/photos/1571458/pexels-photo-1571458.jpeg" class="card-img-top" alt="Room">
                        <div class="card-body text-center">
                            <h4 class="fw-bold">Grade 3</h4>
                            <!-- <p class="text-muted">Diện tích: 60m2 | View Biển | Tiện nghi cao cấp</p> -->
                            <h5 style="color: #c5a47e;">Chỉ từ 550.000 VNĐ / Night</h5>
                            <hr>
                            <button class="btn btn-link text-dark text-decoration-none fw-bold">Đặt phòng <i class="fa fa-arrow-right"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-muted small mt-3">
                <!-- Gợi ý: copy thêm các khung card này nếu bạn có nhiều loại phòng, chỉ cần đổi hình, tên phòng, mô tả và giá. -->
            </div>
        </div>
    </section>

    <!-- Form đặt phòng thật sự -->
    <section class="py-4">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <h4 class="mb-3 text-center">Điền thông tin đặt phòng</h4>
                    <form id="booking-form" class="border p-4 bg-white shadow-sm rounded-3">
                        <div class="mb-3">
                            <label class="form-label">Chọn loại phòng</label>
                            <select class="form-select" id="room_id" required>
                                <option value="" selected disabled>-- Chọn phòng --</option>
                                <option value="1">Grade 1 - Phòng 101</option>
                                <option value="2">Grade 2 - Phòng 102</option>
                                <option value="3">Grade 3 - Phòng 103</option>
                            </select>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label class="form-label">Ngày nhận phòng</label>
                                <input type="date" class="form-control" id="check_in" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Ngày trả phòng</label>
                                <input type="date" class="form-control" id="check_out" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label class="form-label">Giờ nhận phòng</label>
                                <input type="time" class="form-control" id="check_in_time">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Giờ trả phòng</label>
                                <input type="time" class="form-control" id="check_out_time">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Họ tên khách</label>
                            <input type="text" class="form-control" id="guest_name" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Số điện thoại</label>
                            <input type="tel" class="form-control" id="guest_phone" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="guest_email" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Số CMND/CCCD</label>
                            <input type="text" class="form-control" id="guest_id_card" required>
                        </div>

                        <button type="submit" class="btn btn-luxury text-white w-100">Xác nhận đặt phòng</button>

                        <div id="booking-message" class="form-text mt-2"></div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_BASE_URL = "https://web-demo-backend.onrender.com/api";

        document.getElementById("booking-form").addEventListener("submit", async (e) => {
            e.preventDefault();

            const room_id = parseInt(document.getElementById("room_id").value, 10);
            const check_in = document.getElementById("check_in").value;
            const check_out = document.getElementById("check_out").value;
            const check_in_time = document.getElementById("check_in_time").value;
            const check_out_time = document.getElementById("check_out_time").value;
            const guest_name = document.getElementById("guest_name").value.trim();
            const guest_phone = document.getElementById("guest_phone").value.trim();
            const guest_email = document.getElementById("guest_email").value.trim();
            const guest_id_card = document.getElementById("guest_id_card").value.trim();

            const messageEl = document.getElementById("booking-message");
            messageEl.textContent = "Đang gửi yêu cầu...";
            messageEl.className = "form-text mt-2 text-muted";

            try {
                const res = await fetch(`${API_BASE_URL}/bookings`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        room_id,
                        check_in,
                        check_out,
                        check_in_time,
                        check_out_time,
                        guest_name,
                        guest_phone,
                        guest_email,
                        guest_id_card,
                    }),
                });

                const data = await res.json();

                if (res.ok && data.success) {
                    messageEl.textContent = data.message || "Đặt phòng thành công!";
                    messageEl.className = "form-text mt-2 text-success";
                    document.getElementById("booking-form").reset();
                } else {
                    messageEl.textContent = data.message || "Đặt phòng thất bại";
                    messageEl.className = "form-text mt-2 text-danger";
                }
            } catch (err) {
                console.error("Booking error", err);
                messageEl.textContent = "Không kết nối được tới server";
                messageEl.className = "form-text mt-2 text-danger";
            }
        });
    </script>
</body>
</html>

